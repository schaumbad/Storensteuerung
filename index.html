<!DOCTYPE html>
<html>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>

html { 
  font-family: 'Arial';
}

h1 {
  margin-bottom: 5px;
}

button {
  height: 100px; width:100px;
  border-radius: 10px;
  margin-bottom: 10px;
  margin-right:  5px;
  user-select: none;
}

button:active {
  background-color: lightgreen;
  transform: translateY(5px);
}

div.group {
  margin-top:  20px;
  margin-left: 20px;
}
</style>

<body onload="init()">

<div class="group">
<h1>Nord</h1>
<div>
<button onclick="sendLong (relayNordAuf,relayNordAb)">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="80" height="80" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="gray" d="M5.23 10.64a1 1 0 0 0 1.41.13L11 7.14V19a1 1 0 0 0 2 0V7.14l4.36 3.63a1 1 0 1 0 1.28-1.54l-6-5l-.15-.09l-.13-.07a1 1 0 0 0-.72 0l-.13.07l-.15.09l-6 5a1 1 0 0 0-.13 1.41z"/></svg></button>
<button onclick="sendShort(relayNordAuf,relayNordAb)">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="80" height="80" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="gray" d="M18 15a1 1 0 0 1-.64-.23L12 10.29l-5.37 4.32a1 1 0 0 1-1.41-.15a1 1 0 0 1 .15-1.41l6-4.83a1 1 0 0 1 1.27 0l6 5a1 1 0 0 1 .13 1.41A1 1 0 0 1 18 15z"/></svg></button>
</div>
<div>
<button onclick="sendLong (relayNordAb,relayNordAuf)">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="80" height="80" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="gray" d="M18.77 13.36a1 1 0 0 0-1.41-.13L13 16.86V5a1 1 0 0 0-2 0v11.86l-4.36-3.63a1 1 0 1 0-1.28 1.54l6 5l.15.09l.13.07a1 1 0 0 0 .72 0l.13-.07l.15-.09l6-5a1 1 0 0 0 .13-1.41z"/></svg></button>
<button onclick="sendShort(relayNordAb,relayNordAuf)">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="80" height="80" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="gray" d="M12 16a1 1 0 0 1-.64-.23l-6-5a1 1 0 1 1 1.28-1.54L12 13.71l5.36-4.32a1 1 0 0 1 1.41.15a1 1 0 0 1-.14 1.46l-6 4.83A1 1 0 0 1 12 16z"/></svg></button>
</div>
</div>

<div class="group">
<h1>SÃ¼d</h1>
<div>
<button onclick="sendLong (relaySuedAuf,relaySuedAb)">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="80" height="80" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="gray" d="M5.23 10.64a1 1 0 0 0 1.41.13L11 7.14V19a1 1 0 0 0 2 0V7.14l4.36 3.63a1 1 0 1 0 1.28-1.54l-6-5l-.15-.09l-.13-.07a1 1 0 0 0-.72 0l-.13.07l-.15.09l-6 5a1 1 0 0 0-.13 1.41z"/></svg></button>
<button onclick="sendShort(relaySuedAuf,relaySuedAb)">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="80" height="80" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="gray" d="M18 15a1 1 0 0 1-.64-.23L12 10.29l-5.37 4.32a1 1 0 0 1-1.41-.15a1 1 0 0 1 .15-1.41l6-4.83a1 1 0 0 1 1.27 0l6 5a1 1 0 0 1 .13 1.41A1 1 0 0 1 18 15z"/></svg></button>
</div>
<div>
<button onclick="sendLong (relaySuedAb,relaySuedAuf)">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="80" height="80" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="gray" d="M18.77 13.36a1 1 0 0 0-1.41-.13L13 16.86V5a1 1 0 0 0-2 0v11.86l-4.36-3.63a1 1 0 1 0-1.28 1.54l6 5l.15.09l.13.07a1 1 0 0 0 .72 0l.13-.07l.15-.09l6-5a1 1 0 0 0 .13-1.41z"/></svg></button>
<button onclick="sendShort(relaySuedAb,relaySuedAuf)">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="80" height="80" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="gray" d="M12 16a1 1 0 0 1-.64-.23l-6-5a1 1 0 1 1 1.28-1.54L12 13.71l5.36-4.32a1 1 0 0 1 1.41.15a1 1 0 0 1-.14 1.46l-6 4.83A1 1 0 0 1 12 16z"/></svg></button>
</div>
</div>


<script>
const shellyNord = "http://192.168.0.23"
const shellySued = "http://192.168.0.24"

const relaySuedAuf = shellySued + "/relay/0"
const relaySuedAb  = shellySued + "/relay/1"
const relayNordAuf = shellyNord + "/relay/0"
const relayNordAb  = shellyNord + "/relay/1"

function sendOff(relay)     { return fetch(relay + "?turn=off"); }
function sendOnLong(relay)  { return fetch(relay + "?turn=on&timer=2"); }
function sendOnShort(relay) { return fetch(relay + "?turn=on&timer=1"); }

var lastPromise = 0;

function init() {
  lastPromise = Promise.all([
    fetch(shellyNord + "/status"),
    fetch(shellySued + "/status")
  ]);
  lastPromise.catch(failureCallback);
}


function sendLong(relay, opposite) {
  navigator.vibrate(400);
  lastPromise = lastPromise
    .then(response => sendOff(opposite))
    .then(response => sendOff(relay))
    .then(response => sendOnLong(relay))
    .catch(failureCallback);
}

function sendShort(relay, opposite) {
  navigator.vibrate(200);
  lastPromise = lastPromise
    .then(response => sendOff(opposite))
    .then(response => sendOff(relay))
    .then(response => sendOnShort(relay))
    .then(response => sendOff(relay))
    .catch(failureCallback);
}

function failureCallback(err) {
  console.log(err);
}

</script>

</body>
</html>
